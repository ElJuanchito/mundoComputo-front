<div class="container">
	<div class="login-box">
		<div class="modal-overlay">
			<div class="modal-container">
				<div class="modal-content">
					<h5 class="modal-title">
						<i class="fa-solid fa-right-to-bracket me-3"></i>Iniciar Sesion
					</h5>

					<form class="user-form row g-3" [formGroup]="loginForm" (ngSubmit)="login()">
						@if (!codeSent) {
						<div class="col-12">
							<div class="form-group">
								<input placeholder="Correo electrónico" class="form-input" id="email" type="email"
									formControlName="email" />
							</div>
						</div>
						<div class="form-group">
							<input placeholder="Contraseña" class="form-input" id="password" type="password"
								formControlName="password" />
						</div>

						<div class="col-12 text-center">
							<button type="button" class="btn btn-custom custom-button" (click)="sendCode()"
								[disabled]="loading || !loginForm.get('email')?.valid">
								<i class="fa-solid fa-plus me-2"></i>Enviar código
							</button>
						</div>
						}
						@else {
						<div>
							<p class="text-center">Hemos enviado un código a tu correo electrónico.</p>
							<p class="text-center">Por favor, ingresa el código a continuación:</p>
							<div class="form-group">
								<input placeholder="Código" class="form-input" id="code" type="text"
									formControlName="code" />
							</div>
							<div class="text-center mt-2">
								<span class="countdown-timer">Código válido por: <b>{{ countdownDisplay }}</b></span>
							</div>
							<div class="text-center mt-2">
								<a href="#" (click)="sendCode()" [class.disabled]="countdown > 0">Reenviar código</a>
							</div>
							<div class="text-center">
								<button type="submit" class="btn btn-submit"
									[disabled]="loading || loginForm.invalid || countdown <= 0">
									<i class="fa-solid fa-plus me-2"></i>Iniciar Sesión
								</button>
							</div>
						</div>
						}
					</form>
				</div>

			</div>
		</div>
	</div>
	<div class="banner-box">
		<img src="assets/logo.png" alt="Logo de mundo-computo" />
	</div>
</div>